!function(){"use strict";const e=new MessageChannel;window.parent.postMessage("Init","*",[e.port2]);const t=new class{constructor(e){this.messagePort=e}send(e){this.messagePort.postMessage(e)}}(e.port1),n=function(e){const t=window.document.querySelector("meta[name=viewport]");if(t&&t instanceof HTMLMetaElement)return function(e){const t=/(\w+) *= *([^\s,]+)/g,n=new Map;let s;for(;s=t.exec(e);)null!=s&&n.set(s[1],s[2]);const i=parseFloat(n.get("width")),o=parseFloat(n.get("height"));return i&&o?{width:i,height:o}:void 0}(t.content)}();t.send({kind:"contentSize",size:n});const s=new class{constructor(e){this.messageSender=e}onTap(e){this.messageSender.send({kind:"tap",x:e.clientX,y:e.clientY})}onLinkActivated(e,t){this.messageSender.send({kind:"linkActivated",href:e,outerHtml:t})}}(t);new class{constructor(e,t){this.window=e,this.listener=t,document.addEventListener("click",(e=>{this.onClick(e)}),!1)}onClick(e){if(e.defaultPrevented)return;const t=this.window.getSelection();if(t&&"Range"==t.type)return;let n;n=e.target instanceof HTMLElement?this.nearestInteractiveElement(e.target):null,n?n instanceof HTMLAnchorElement&&this.listener.onLinkActivated(n.href,n.outerHTML):this.listener.onTap(e),e.stopPropagation(),e.preventDefault()}nearestInteractiveElement(e){return null==e?null:-1!=["a","audio","button","canvas","details","input","label","option","select","submit","textarea","video"].indexOf(e.nodeName.toLowerCase())||e.hasAttribute("contenteditable")&&"false"!=e.getAttribute("contenteditable").toLowerCase()?e:e.parentElement?this.nearestInteractiveElement(e.parentElement):null}}(window,s)}();
//# sourceMappingURL=fixed-injectable-script.js.map